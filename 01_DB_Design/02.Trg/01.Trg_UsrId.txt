-- ID設定トリガを作成
CREATE OR REPLACE TRIGGER TRG_USR_ID BEFORE
  INSERT
    ON USR FOR EACH ROW WHEN
    (
      -- 新ユーザIDが
      -- NULLの場合、ユーザIDを作成する
      -- NULLでない場合、そのユーザIDを設定する
      NEW.USR_ID IS NULL
    )
BEGIN
  SELECT
    'USR'
    || ( COUNT(*) + 1 )
  INTO
    :NEW.USR_ID
  FROM
    USR;
END;